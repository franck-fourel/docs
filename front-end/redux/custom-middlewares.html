
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>custom middlewares Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="directory-structure.html" />
    
    
    <link rel="prev" href="dependencies.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../datetime/">
            
                <a href="../../datetime/">
            
                    
                    datetime guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../datetime/diabetes-data.html">
            
                <a href="../../datetime/diabetes-data.html">
            
                    
                    diabetes data datetimes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../datetime/falsehoods.html">
            
                <a href="../../datetime/falsehoods.html">
            
                    
                    falsehoods re: diabetes data datetimes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../datetime/now.html">
            
                <a href="../../datetime/now.html">
            
                    
                    now
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../datetime/user-dates.html">
            
                <a href="../../datetime/user-dates.html">
            
                    
                    user-significant dates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../GitHub/">
            
                <a href="../../GitHub/">
            
                    
                    git and GitHub usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../">
            
                <a href="../">
            
                    
                    front-end @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../react/">
            
                <a href="../react/">
            
                    
                    React @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../react/recommended-reading.html">
            
                <a href="../react/recommended-reading.html">
            
                    
                    recommended reading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../react/dependencies.html">
            
                <a href="../react/dependencies.html">
            
                    
                    dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../react/testing.html">
            
                <a href="../react/testing.html">
            
                    
                    testing strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="./">
            
                <a href="./">
            
                    
                    Redux @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="dependencies.html">
            
                <a href="dependencies.html">
            
                    
                    dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2.2" data-path="custom-middlewares.html">
            
                <a href="custom-middlewares.html">
            
                    
                    custom middlewares
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="directory-structure.html">
            
                <a href="directory-structure.html">
            
                    
                    directory structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="actions.html">
            
                <a href="actions.html">
            
                    
                    standard actions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    testing strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../recipes.html">
            
                <a href="../recipes.html">
            
                    
                    recipes & workflows
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../docs/">
            
                <a href="../../docs/">
            
                    
                    working on docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../docs/guidelines.html">
            
                <a href="../../docs/guidelines.html">
            
                    
                    docs guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../docs/workflow.html">
            
                <a href="../../docs/workflow.html">
            
                    
                    docs setup & workflow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >custom middlewares</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h3 id="custom-middlewares">Custom Middlewares</h3>
<p>One of the great benefits of redux is the easy path it provides for writing middleware to perform various actions in response to some or all of the redux actions that are the source of all changes to the application&apos;s state tree. The open-source community provides some great middleware options like the <a href="https://github.com/fcomb/redux-logger" title="GitHub: redux-logger" target="_blank">redux-logger</a> that we include behind an environment variable to assist in development.</p>
<p>If you&apos;re unfamiliar with the concept of middleware, the <a href="http://redux.js.org/docs/advanced/Middleware.html" title="Redux " target="_blank">section of the redux documentation dedicated to middleware</a> is a well-written, easily-understood thing of beauty. Go read it.</p>
<p>For our use cases at Tidepool, we are currently employing two custom middlewares. Thus far, these are only fully in use in the Chrome uploader and used for just a few metrics and API errors in blip.</p>
<h4 id="metrics-middleware">Metrics Middleware</h4>
<p>The metrics middleware inspects each action that flows through it to see if the action has a <code>metric</code> object inside the <code>meta</code> property of the action. (See <a href="#standardized-actions">Standardized Actions</a> below for an explanation of the <code>meta</code> property.) If the action does have an object at <code>meta.metric</code>, then the middleware calls the Tidepool metrics endpoint with data extracted from <code>metric.eventName</code> and <code>metric.properties</code>.</p>
<p>In the Chrome uploader, the intersection between &quot;things we want metrics for&quot; and &quot;events that are already part of the redux implementation&quot; is nearly perfect; the only exception is the need for an action creator connected to the link to launch blip in a browser window, which does not affect the uploader&apos;s state at all and so would not normally need an action creator for the reducers to respond to and effect change in the store.</p>
<p>In blip, the intersection between &quot;things we want metrics for&quot; and &quot;events that are already part of the redux implementation&quot; is much smaller, which is why we&apos;re only using a metrics middleware for <a href="https://github.com/tidepool-org/blip/blob/master/app/redux/utils/trackingMiddleware.js" title="GitHub: blip app/redux/utils/trackingMiddleware.js" target="_blank">a few metrics</a>.</p>
<h4 id="error-logging-middleware">Error Logging Middleware</h4>
<p>The error logging middleware inspects each action that flows through it to see if the action has its <code>error</code> property set to <code>true</code>. If so, then the middleware calls the Tidepool metrics endpoint with data extracted from the action <code>payload</code> (which will be an <code>Error</code> object according to our <a href="#standardized-actions">Standardized Actions</a>) as well as data extracted from <code>metric</code> inside the <code>meta</code> property as above.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="dependencies.html" class="navigation navigation-prev " aria-label="Previous page: dependencies">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="directory-structure.html" class="navigation navigation-next " aria-label="Next page: directory structure">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"custom middlewares","level":"1.4.2.2","depth":3,"next":{"title":"directory structure","level":"1.4.2.3","depth":3,"path":"front-end/redux/directory-structure.md","ref":"front-end/redux/directory-structure.md","articles":[]},"previous":{"title":"dependencies","level":"1.4.2.1","depth":3,"path":"front-end/redux/dependencies.md","ref":"front-end/redux/dependencies.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["advanced-emoji"],"pluginsConfig":{"advanced-emoji":{"embedEmojis":false},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"front-end/redux/custom-middlewares.md","mtime":"2017-06-21T13:01:48.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-21T13:17:18.494Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>


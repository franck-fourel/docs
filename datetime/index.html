
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>datetime guide Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="diabetes-data.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    datetime guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="diabetes-data.html">
            
                <a href="diabetes-data.html">
            
                    
                    diabetes data datetimes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="falsehoods.html">
            
                <a href="falsehoods.html">
            
                    
                    falsehoods re: diabetes data datetimes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="now.html">
            
                <a href="now.html">
            
                    
                    now
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="user-dates.html">
            
                <a href="user-dates.html">
            
                    
                    user-significant dates
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../GitHub/">
            
                <a href="../GitHub/">
            
                    
                    git and GitHub usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../front-end/">
            
                <a href="../front-end/">
            
                    
                    front-end @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../front-end/react/">
            
                <a href="../front-end/react/">
            
                    
                    React @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../front-end/react/recommended-reading.html">
            
                <a href="../front-end/react/recommended-reading.html">
            
                    
                    recommended reading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../front-end/react/dependencies.html">
            
                <a href="../front-end/react/dependencies.html">
            
                    
                    dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../front-end/react/testing.html">
            
                <a href="../front-end/react/testing.html">
            
                    
                    testing strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../front-end/redux/">
            
                <a href="../front-end/redux/">
            
                    
                    Redux @ Tidepool
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../front-end/redux/dependencies.html">
            
                <a href="../front-end/redux/dependencies.html">
            
                    
                    dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../front-end/redux/custom-middlewares.html">
            
                <a href="../front-end/redux/custom-middlewares.html">
            
                    
                    custom middlewares
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../front-end/redux/directory-structure.html">
            
                <a href="../front-end/redux/directory-structure.html">
            
                    
                    directory structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../front-end/redux/actions.html">
            
                <a href="../front-end/redux/actions.html">
            
                    
                    standard actions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../front-end/redux/testing.html">
            
                <a href="../front-end/redux/testing.html">
            
                    
                    testing strategies
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../front-end/recipes.html">
            
                <a href="../front-end/recipes.html">
            
                    
                    recipes & workflows
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../docs/">
            
                <a href="../docs/">
            
                    
                    working on docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../docs/guidelines.html">
            
                <a href="../docs/guidelines.html">
            
                    
                    docs guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../docs/workflow.html">
            
                <a href="../docs/workflow.html">
            
                    
                    docs setup & workflow
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >datetime guide</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="jebecks-guide-to-handling-datetimes-at-tidepool">@jebeck&apos;s guide to handling datetimes at Tidepool</h2>
<p><strong>tl;dr</strong>: Handling datetimes in the modern world is hard. Like, <em>really freaking hard</em>. &#x1F613;</p>
<p>What are some of the things that make it hard? A short list: <a href="../GLOSSARY.html#dst" class="glossary-term" title="Daylight saving time (abbreviated DST) is the practice of advancing clock time by an hour during the summer months so that evening daylight lasts longer.">DST</a>, frequent cross-<a href="../GLOSSARY.html#timezone" class="glossary-term" title="A timezone&#x2014;sometimes referred to as a named timezone or timezoneName at Tidepool for clarity&#x2014;is a String value referring to a timezone from the IANA Time Zone Database.">timezone</a> travel, and technology like smart phones and browsers operating in an always locale-aware manner. This is @jebeck&apos;s handy guide to the most common situations at Tidepool where you&apos;ll have to handle datetimes and the best strategies for doing so.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>We need to start with the same vocabulary, as some terms are similar but the differences between them can be <em>crucial</em>. Before continuing with this guide, review the following terms in the <a href="../GLOSSARY.html">glossary</a>:</p>
<ul>
<li><a href="../GLOSSARY.html#btutc" class="glossary-term" title="Bootstrapping to UTC (BtUTC) is the algorithm Tidepool uses to infer UTC datetimes from the relative datetimes stored on diabetes devices in combination with the timezone of the most recent data on the device and the set of display time settings changes on the device.">BtUTC</a></li>
<li><a href="../GLOSSARY.html#calendar-date" class="glossary-term" title="An object involving only date information&#x2014;year, month, and day&#x2014;and referring to a date in the 365-day Gregorian calendar; represented best in ISO 8601 YYYY-MM-DD format.">calendar date</a></li>
<li><a href="../GLOSSARY.html#clock-time" class="glossary-term" title="An object involving only time information&#x2014;hours, minutes, seconds, and possibly milliseconds&#x2014;and referring to a point within a standard twenty-four hour day.">clock time</a></li>
<li><a href="../GLOSSARY.html#datetime" class="glossary-term" title="A &quot;datetime&quot; is our catchall term for an object involving both clock time information&#x2014;hours, minutes, seconds, and possibly milliseconds&#x2014;and date information&#x2014;year, month, and day.">datetime</a></li>
<li><a href="../GLOSSARY.html#dst" class="glossary-term" title="Daylight saving time (abbreviated DST) is the practice of advancing clock time by an hour during the summer months so that evening daylight lasts longer.">DST</a></li>
<li><a href="../GLOSSARY.html#hammertime" class="glossary-term" title="A Unix time in milliseconds instead of seconds.">hammertime</a></li>
<li><a href="../GLOSSARY.html#iso-8601" class="glossary-term" title="ISO 8601 is the International Organization for Standardization&apos;s (ISO) standard covering the exchange of date- and time-related data.">ISO 8601</a></li>
<li><a href="../GLOSSARY.html#timezone" class="glossary-term" title="A timezone&#x2014;sometimes referred to as a named timezone or timezoneName at Tidepool for clarity&#x2014;is a String value referring to a timezone from the IANA Time Zone Database.">timezone</a></li>
<li><a href="../GLOSSARY.html#timezone" class="glossary-term" title="A timezone&#x2014;sometimes referred to as a named timezone or timezoneName at Tidepool for clarity&#x2014;is a String value referring to a timezone from the IANA Time Zone Database.">timezone</a> offset</li>
<li><a href="../GLOSSARY.html#unix-time" class="glossary-term" title="Unix time is a particularly machine-friendly method for representing a datetime, defined as the number of seconds that have elapsed since midnight on January 1st, 1970.">Unix time</a></li>
<li><a href="../GLOSSARY.html#utc" class="glossary-term" title="Coordinated Universal Time (UTC) is the primary date &amp; time standard by which planet Earth regulates clocks and time.">UTC</a></li>
</ul>
<p>It is also essential for those handling datetimes on diabetes devices for <em>ingestion</em> into the Tidepool platform to review the <a href="falsehoods.html" title="Falsehoods Tidepoolers (want to) believe about diabetes device times">falsehoods Tidepoolers (want to) believe about diabetes device times</a>. (It is certainly advisable for those handling datetimes on diabetes data in the client(s) to review this list as well, but it isn&apos;t quite as essential.)</p>
<p>In addition to these prerequisites, here are a few readings and videos that are also well worth study, though maybe not all at once:</p>
<ul>
<li><a href="http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time" title="Falsehoods programmers believe about time" target="_blank">Falsehoods programmers believe about time</a><sup><a href="#fn_a" id="reffn_a">a</a></sup></li>
</ul>
<!--TODO: dig up that one video TS linked me to ages ago; perhaps he remembers it?-->
<h3 id="the-guides">The guide(s)</h3>
<p>The first key takeaway is that there is not <em>one</em> guide to datetimes at Tidepool. There are three: three distinct guides for three quite distinct situations. Or really, three distinct types of datetimes that are encountered regularly in the Tidepool codebase. So the first question a Tidepool engineer should ask themself is, &quot;What kind of <a href="../GLOSSARY.html#datetime" class="glossary-term" title="A &quot;datetime&quot; is our catchall term for an object involving both clock time information&#x2014;hours, minutes, seconds, and possibly milliseconds&#x2014;and date information&#x2014;year, month, and day.">datetime</a> am I trying to manipulate?&quot; Then look at the appropriate guide below:</p>
<ul>
<li><a href="diabetes-data.html">guide to handling diabetes data</a>: This is the big one, naturally given Tidepool&apos;s mission. If you are dealing with a <code>time</code> or a <code>deviceTime</code> from a datum conforming to the Tidepool data model, this is the guide for you!</li>
<li><a href="now.html">guide to handling browser-local datetimes in the present moment (i.e., <code>now</code>s)</a>: If you&apos;re trying to manipulate the <a href="../GLOSSARY.html#datetime" class="glossary-term" title="A &quot;datetime&quot; is our catchall term for an object involving both clock time information&#x2014;hours, minutes, seconds, and possibly milliseconds&#x2014;and date information&#x2014;year, month, and day.">datetime</a> representing a user&apos;s action in the present moment&#x2014;that is, a &quot;now&quot;&#x2014;then this is the guide you want.</li>
<li><a href="user-dates.html">guide to handling user-significant calendar dates</a>: If you&apos;re working with any <a href="../GLOSSARY.html#calendar-date" class="glossary-term" title="An object involving only date information&#x2014;year, month, and day&#x2014;and referring to a date in the 365-day Gregorian calendar; represented best in ISO 8601 YYYY-MM-DD format.">calendar date</a> stored in the user&apos;s profile (as of May 2017, these are <code>birthday</code> and <code>diagnosisDate</code>), look at this guide.</li>
</ul>
<blockquote id="fn_a">
<sup>a</sup>. Hat tip to @darinkrauss for linking this one in the Tidepool Slack!<a href="#reffn_a" title="Jump back to footnote [a] in the text."> &#x21A9;</a>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="diabetes-data.html" class="navigation navigation-next " aria-label="Next page: diabetes data datetimes">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"datetime guide","level":"1.2","depth":1,"next":{"title":"diabetes data datetimes","level":"1.2.1","depth":2,"path":"datetime/diabetes-data.md","ref":"datetime/diabetes-data.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["advanced-emoji"],"pluginsConfig":{"advanced-emoji":{"embedEmojis":false},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"datetime/README.md","mtime":"2017-06-21T13:05:34.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-21T13:17:18.494Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

